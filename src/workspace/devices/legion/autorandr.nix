{ config, ... }:
let
  dpi = config.workspace.ui.dpi;
in
{
  services.autorandr = {
    enable = true;
    hooks = {
      postswitch = {
        "dpi" = ''
          xrandr --dpi ${builtins.toString dpi}
          leftwm command SoftReload
        '';
      };
    };
    ignoreLid = true;
    profiles = {
      "desktop" = {
        fingerprint = {
          "DP-4" = "00ffffffffffff000e6f091500000000001f0104a522137803da45a4544b9b260f505400000001010101010101010101010101010101636300a0a0a077503020350058c110000018000000fd0c3ca5020246010a202020202020000000fe0043534f542054330a2020202020000000fe004d4e463630314341312d330a20019c701379000003011450110184ff099f002f001f009f0576000200040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006190";
          "HDMI-0" = "00ffffffffffff00220e6f3601010101091f010380351e782a0e35a4544d9d260f5054a10800d1c081c081809500a9c0a940b300d100565e00a0a0a02950302035000f282100001a000000fd00323c1e5a19000a202020202020000000fc0048502032346d710a2020202020000000ff00434e43313039313851340a20200195020319b149101f0413031202110167030c0010000032e2006b023a801871382d40582c45000f282100001e023a80d072382d40102c45800f282100001e565e00a0a0a02950302035000f282100001a283c80a070b02340302036000f282100001a0000000000000000000000000000000000000000000000000000000000002e";
        };
        config = {
          "HDMI-0" = {
            crtc = 0;
            inherit dpi;
            enable = true;
            mode = "2560x1440";
            position = "0x0";
            primary = true;
            rate = "59.95";
          };
          "DP-4" = {
            crtc = 1;
            inherit dpi;
            enable = true;
            mode = "2560x1440";
            position = "0x1440";
            rate = "165.00";
          };
        };
      };
      "mobile" = {
        fingerprint = {
          "DP-4" = "00ffffffffffff000e6f091500000000001f0104a522137803da45a4544b9b260f505400000001010101010101010101010101010101636300a0a0a077503020350058c110000018000000fd0c3ca5020246010a202020202020000000fe0043534f542054330a2020202020000000fe004d4e463630314341312d330a20019c701379000003011450110184ff099f002f001f009f0576000200040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006190";
        };
        config = {
          "DP-4" = {
            crtc = 0;
            inherit dpi;
            mode = "2560x1440";
            position = "0x0";
            rate = "165.00";
          };
        };
      };
    };
  };
}
